<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Membership Packages – HeartLink</title>
<style>
  body {
    font-family: 'Poppins', sans-serif;
    background-color: #fff5f7;
    color: #333;
    margin: 0;
    text-align: center;
  }
  header {
    background-color: #ffb6c1;
    padding: 15px;
    color: white;
    font-size: 1.5em;
  }
  .container {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 20px;
    padding: 30px;
  }
  .card {
    background: white;
    border-radius: 12px;
    padding: 20px;
    width: 250px;
    box-shadow: 0 3px 8px rgba(0,0,0,0.1);
    transition: transform 0.2s;
  }
  .card:hover { transform: translateY(-3px); }
  .btn {
    background-color: #ff7fa8;
    color: white;
    border: none;
    border-radius: 8px;
    padding: 10px 20px;
    margin-top: 10px;
    cursor: pointer;
    font-weight: bold;
  }
  .btn:hover { background-color: #ff5c8d; }
  #payModal {
    display: none;
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background-color: rgba(0,0,0,0.4);
    justify-content: center;
    align-items: center;
  }
  .modal-content {
    background: white;
    border-radius: 12px;
    padding: 25px;
    max-width: 400px;
    text-align: left;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
  }
  .modal-content h3 {
    text-align: center;
    color: #ff7fa8;
  }
  textarea {
    width: 100%;
    border-radius: 6px;
    border: 1px solid #ccc;
    margin-top: 8px;
    padding: 8px;
    resize: vertical;
  }
  #toast {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background-color: #ff7fa8;
    color: white;
    padding: 10px 15px;
    border-radius: 6px;
    display: none;
  }
</style>
</head>
<body>
<header>Choose Your Membership Plan</header>

<div class="container">
  <div class="card">
    <h3>Bronze</h3>
    <p>Ksh 400 / month</p>
    <button class="btn" onclick="openPay('Bronze')">Pay Now</button>
  </div>
  <div class="card">
    <h3>Silver</h3>
    <p>Ksh 750 / month</p>
    <button class="btn" onclick="openPay('Silver')">Pay Now</button>
  </div>
  <div class="card">
    <h3>Gold</h3>
    <p>Ksh 1500 / month</p>
    <button class="btn" onclick="openPay('Gold')">Pay Now</button>
  </div>
</div>

<div id="payModal">
  <div class="modal-content">
    <h3 id="planTitle">Payment Instructions</h3>
    <p><strong>To complete your payment:</strong></p>
    <ol>
      <li>Go to <strong>M-PESA → Lipa na M-PESA</strong></li>
      <li>Select <strong>Buy Goods and Services</strong></li>
      <li>Enter Till Number: <strong>9824375</strong></li>
      <li>Account Name: <strong>HAKIKA R PROVISION</strong></li>
      <li>Enter the amount for your package.</li>
      <li>Enter your M-PESA PIN and wait for confirmation SMS.</li>
    </ol>
    <hr>
    <p>After receiving your confirmation SMS, paste it below:</p>
    <textarea id="mpesaMsg" rows="4" placeholder="Paste M-PESA message here..."></textarea>
    <button class="btn" onclick="verifyPayment()">Confirm Payment</button>
    <button class="btn" style="background-color:#ccc;color:#333" onclick="closeModal()">Cancel</button>
  </div>
</div>

<div id="toast"></div>

<script>
let selectedPlan = '';

function showToast(msg){
  const toast = document.getElementById('toast');
  toast.textContent = msg;
  toast.style.display='block';
  setTimeout(()=>toast.style.display='none',3000);
}

function openPay(plan){
  selectedPlan = plan;
  document.getElementById('planTitle').textContent = `${plan} Package Payment`;
  document.getElementById('payModal').style.display='flex';
}

function closeModal(){
  document.getElementById('payModal').style.display='none';
}

function verifyPayment(){
  const msg = document.getElementById('mpesaMsg').value.trim().toUpperCase();
  if(!msg){
    showToast('⚠️ Please paste your M-PESA message.');
    return;
  }
  if(msg.includes(selectedPlan.toUpperCase()) && msg.includes('HAKIKA') && msg.includes('PROVISION')){
    showToast(`✅ ${selectedPlan} Payment Verified! Welcome to HeartLink.`);
    setTimeout(()=>window.location.href='dashboard.html',2000);
  } else {
    showToast('❌ Could not verify payment. Ensure message contains the package name and HAKIKA R PROVISION.');
  }
}
</script>
</body>
</html>
