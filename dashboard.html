<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>HeartLink Dashboard</title>
<style>
  body {
    font-family: 'Poppins', sans-serif;
    background-color: #fff5f7;
    margin: 0;
    color: #333;
  }
  header {
    background-color: #ffb6c1;
    padding: 10px 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  header h1 { color: #fff; margin: 0; }
  nav {
    display: flex;
    align-items: center;
    gap: 15px;
  }
  nav a, nav button {
    color: white;
    text-decoration: none;
    font-weight: bold;
    background: none;
    border: none;
    cursor: pointer;
  }
  nav a:hover, nav button:hover { text-decoration: underline; }
  .container { padding: 20px; }
  .matches-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
    gap: 10px;
  }
  .card {
    background: white;
    border-radius: 10px;
    padding: 10px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    text-align: center;
    transition: transform 0.2s;
  }
  .card:hover { transform: translateY(-3px); }
  .btn {
    background-color: #ff7fa8;
    color: white;
    border: none;
    border-radius: 6px;
    padding: 6px 12px;
    margin: 5px;
    cursor: pointer;
  }
  .btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
  #chats, #notifications { display: none; }
  #toast {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background-color: #ff7fa8;
    color: white;
    padding: 10px 15px;
    border-radius: 6px;
    display: none;
  }
  /* Upgrade Modal */
  .modal {
    display: none;
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.5);
    justify-content: center;
    align-items: center;
    z-index: 1000;
  }
  .modal-content {
    background: white;
    border-radius: 10px;
    padding: 20px;
    width: 90%;
    max-width: 400px;
    text-align: center;
  }
  .modal-content h2 { color: #ff7fa8; }
  .plan {
    display: block;
    width: 100%;
    margin: 10px 0;
    padding: 10px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-weight: bold;
  }
  .bronze { background: #cd7f32; color: white; }
  .silver { background: #c0c0c0; color: black; }
  .gold { background: #ffd700; color: black; }
  .close-btn {
    background: #ffb6c1;
    color: white;
    margin-top: 1rem;
  }
</style>
</head>
<body>
<header>
  <h1>HeartLink</h1>
  <nav>
    <a href="#" id="homeLink">Home</a>
    <a href="#" id="matchesLink">Matches</a>
    <a href="#" id="chatsLink">Chats</a>
    <a href="#" id="notificationsLink">Notifications <span id="notifCount">(0)</span></a>
    <button id="upgradeBtn">‚≠ê Upgrade</button>
    <a href="index.html" id="logoutLink">Logout</a>
  </nav>
</header>
<div class="container">
  <section id="matches">
    <h2>Matches</h2>
    <div class="matches-grid" id="matchesGrid"></div>
  </section>
  <section id="chats">
    <h2>Chats</h2>
    <div id="chatsList"></div>
  </section>
  <section id="notifications">
    <h2>Notifications</h2>
    <ul id="notifList"></ul>
  </section>
</div>
<div id="toast"></div>

<!-- Upgrade Modal -->
<div class="modal" id="upgradeModal">
  <div class="modal-content">
    <h2>Upgrade Your Membership</h2>
    <p>Select a plan to unlock premium features:</p>
    <button class="plan bronze" onclick="selectPlan('bronze',400)">ü•â Bronze ‚Äî Ksh 400</button>
    <button class="plan silver" onclick="selectPlan('silver',750)">ü•à Silver ‚Äî Ksh 750</button>
    <button class="plan gold" onclick="selectPlan('gold',1500)">ü•á Gold ‚Äî Ksh 1500</button>
    <button class="close-btn" onclick="toggleModal(false)">Close</button>
  </div>
</div>

<script>
const matchesGrid = document.getElementById('matchesGrid');
const notifList = document.getElementById('notifList');
const notifCount = document.getElementById('notifCount');
const chatsList = document.getElementById('chatsList');
const toast = document.getElementById('toast');
const sections = {
  matches: document.getElementById('matches'),
  chats: document.getElementById('chats'),
  notifications: document.getElementById('notifications')
};

function showSection(name){
  Object.values(sections).forEach(sec => sec.style.display='none');
  sections[name].style.display='block';
}

function showToast(msg){
  toast.textContent = msg;
  toast.style.display='block';
  setTimeout(()=>toast.style.display='none',3000);
}

// Mock JWT and data
const token = localStorage.getItem('token') || 'mockToken';
const userGender = 'male';

function generateMatches(){
  matchesGrid.innerHTML='';
  const genderToShow = userGender==='male'?'female':'male';
  for(let i=1;i<=25;i++){
    const card=document.createElement('div');
    card.className='card';
    const name = genderToShow==='female'?'Sophia '+i:'Liam '+i;
    card.innerHTML=`
      <h4>${name}</h4>
      <p>${Math.floor(Math.random()*10)+20} yrs</p>
      <button class='btn viewBtn'>View</button>
      <button class='btn likeBtn'>Like</button>
      <button class='btn chatBtn' data-name="${name}">Chat</button>`;
    matchesGrid.appendChild(card);
  }
}

function randomBotMessage(){
  const messages=[
    'Hey there! How are you today? üòä',
    'You seem interesting, wanna chat?',
    'Loved your profile picture!',
    'What‚Äôs your favorite hobby?',
    'Hi! I‚Äôm new here too.'
  ];
  return messages[Math.floor(Math.random()*messages.length)];
}

function generateRandomBotChats(){
  chatsList.innerHTML='';
  const bots = ['Ava','Noah','Mia','Ethan','Emma','Oliver'];
  bots.forEach(bot=>{
    const msg = randomBotMessage();
    const div = document.createElement('div');
    div.className='card';
    div.innerHTML=`<strong>${bot}:</strong> ${msg}`;
    chatsList.appendChild(div);
    // Also push to notifications
    const li = document.createElement('li');
    li.textContent = `${bot}: ${msg}`;
    notifList.appendChild(li);
  });
  notifCount.textContent = `(${bots.length})`;
}

document.getElementById('matchesLink').addEventListener('click',()=>showSection('matches'));
document.getElementById('chatsLink').addEventListener('click',()=>showSection('chats'));
document.getElementById('notificationsLink').addEventListener('click',()=>showSection('notifications'));

// Handle match card buttons
document.addEventListener('click',e=>{
  if(e.target.classList.contains('viewBtn')){
    showToast('Viewing profile...');
  }else if(e.target.classList.contains('likeBtn')){
    e.target.disabled=true;
    showToast('‚ù§Ô∏è Liked successfully!');
  }else if(e.target.classList.contains('chatBtn')){
    const user = e.target.dataset.name;
    showToast('Opening chat...');
    setTimeout(()=>window.location.href=`chat.html?user=${encodeURIComponent(user)}`,1000);
  }
});

// Upgrade Modal Logic
const modal = document.getElementById('upgradeModal');
document.getElementById('upgradeBtn').addEventListener('click',()=>toggleModal(true));

function toggleModal(show){
  modal.style.display = show ? 'flex' : 'none';
}

function selectPlan(plan, amount){
  showToast(`Redirecting to ${plan.toUpperCase()} plan...`);
  setTimeout(()=>{
    window.location.href = `packages.html?plan=${plan}&amount=${amount}`;
  }, 1000);
}

// Initialize
generateMatches();
generateRandomBotChats();
showSection('matches');
</script>
</body>
</html>
