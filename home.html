<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>HeartLink ‚Äî Home</title>
<style>
:root{
  --bg:#fff7fb;--accent:#ff4d88;--muted:#6b6b6b;
  --card:#fff;--shadow:0 6px 18px rgba(0,0,0,0.08);
}
*{box-sizing:border-box;}
body{
  font-family:'Poppins',sans-serif;background:var(--bg);
  margin:0;color:#1b1330;display:flex;flex-direction:column;
  min-height:100vh;
}
header{
  background:linear-gradient(90deg,var(--accent),#ff7aa6);
  color:white;padding:16px 28px;display:flex;
  justify-content:space-between;align-items:center;
  box-shadow:var(--shadow);
}
header h1{margin:0;font-size:20px;}
nav a{
  color:white;text-decoration:none;font-weight:600;
  padding:8px 12px;border-radius:8px;transition:.3s;
}
nav a:hover{background:rgba(255,255,255,0.2);}
main{
  flex:1;padding:20px;display:flex;flex-direction:column;align-items:center;
}
.welcome{font-size:22px;font-weight:700;color:var(--accent);margin-bottom:12px;}
.card-grid{
  display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
  gap:12px;width:100%;max-width:900px;overflow-y:auto;
}
.profile-card{
  background:var(--card);border-radius:16px;box-shadow:var(--shadow);
  overflow:hidden;transition:.2s;display:flex;flex-direction:column;
}
.profile-card:hover{transform:translateY(-3px);}
.profile-img{width:100%;height:160px;object-fit:cover;}
.profile-info{padding:10px;text-align:center;}
.profile-info h3{margin:6px 0;font-size:16px;}
.profile-info small{color:var(--muted);}
.btns{display:flex;gap:8px;justify-content:center;margin-top:8px;}
button{
  border:none;border-radius:10px;padding:8px 10px;cursor:pointer;
  font-weight:600;transition:.2s;
}
.btn-like{background:#ffe2eb;color:#ff3377;}
.btn-chat{background:var(--accent);color:white;}
.btn-like:hover,.btn-chat:hover{opacity:0.9;}
footer{text-align:center;padding:10px;background:rgba(0,0,0,0.03);font-size:13px;color:var(--muted);}

#prefBtn{
  position:fixed;bottom:20px;right:20px;background:var(--accent);
  color:white;border:none;padding:12px 18px;border-radius:50px;
  font-weight:600;box-shadow:var(--shadow);cursor:pointer;
}
#prefPanel{
  position:fixed;bottom:70px;right:20px;background:white;
  border-radius:12px;box-shadow:var(--shadow);
  padding:14px;display:none;flex-direction:column;gap:10px;width:240px;
}
#prefPanel input{width:100%;padding:6px;border:1px solid #ddd;border-radius:6px;}
#prefPanel button{background:var(--accent);color:white;border:none;padding:8px;border-radius:8px;}
</style>
</head>
<body>
<header>
  <h1>‚ù§ HeartLink</h1>
  <nav>
    <a href="home.html">Home</a>
    <a href="moment.html">Moments</a>
    <a href="chat.html">Messages</a>
    <a href="profile.html">Me</a>
    <a href="#" id="logoutBtn">Logout</a>
  </nav>
</header>

<main>
  <div class="welcome" id="welcomeText">Hi, ‚ù§Ô∏è</div>
  <div class="card-grid" id="recommendations"></div>
</main>

<button id="prefBtn">‚öôÔ∏è Preferences</button>
<div id="prefPanel">
  <label>Max Age:</label>
  <input type="number" id="agePref" placeholder="e.g. 30">
  <label>Max Distance (km):</label>
  <input type="number" id="distPref" placeholder="e.g. 10">
  <button id="savePrefs">Save</button>
</div>

<footer>¬© <span id="year"></span> HeartLink ‚Äî Real People. Real Connections.</footer>

<script>
const user = JSON.parse(localStorage.getItem('heartlinkUser')||'null');
if(!user){alert("Please sign up first.");location.href="signup.html";}
document.getElementById('welcomeText').textContent=`Hi, ${user.name} ‚ù§Ô∏è`;
document.getElementById('year').textContent=new Date().getFullYear();

const sampleProfiles=[
{name:"Angela",age:25,dist:2,img:"https://i.pravatar.cc/200?img=45"},
{name:"Brian",age:27,dist:3,img:"https://i.pravatar.cc/200?img=12"},
{name:"Clara",age:22,dist:1.5,img:"https://i.pravatar.cc/200?img=47"},
{name:"David",age:30,dist:4,img:"https://i.pravatar.cc/200?img=32"},
{name:"Ella",age:24,dist:2.2,img:"https://i.pravatar.cc/200?img=21"},
{name:"Felix",age:29,dist:5,img:"https://i.pravatar.cc/200?img=38"}
];
const rec=document.getElementById('recommendations');

function showProfiles(){
  const prefs=JSON.parse(localStorage.getItem('heartPrefs')||'{}');
  rec.innerHTML="";
  sampleProfiles.filter(p=>{
    let ok=true;
    if(prefs.age && p.age>prefs.age)ok=false;
    if(prefs.dist && p.dist>prefs.dist)ok=false;
    return ok;
  }).forEach(p=>{
    const c=document.createElement('div');
    c.className='profile-card';
    c.innerHTML=`
      <img src="${p.img}" class="profile-img">
      <div class="profile-info">
        <h3>${p.name}, ${p.age}</h3>
        <small>${p.dist} km away</small>
        <div class="btns">
          <button class="btn-like">‚ù§Ô∏è</button>
          <button class="btn-chat">Say Hi üí¨</button>
        </div>
      </div>`;
    c.querySelector('.btn-like').onclick=()=>{
      alert("You liked "+p.name);
      saveInteraction(p);
    };
    c.querySelector('.btn-chat').onclick=()=>{
      saveInteraction(p);
      location.href=`chat.html?user=${encodeURIComponent(p.name)}`;
    };
    rec.appendChild(c);
  });
}

function saveInteraction(profile){
  let arr=JSON.parse(localStorage.getItem('heartInteractions')||'[]');
  if(!arr.find(x=>x.name===profile.name)) arr.push(profile);
  localStorage.setItem('heartInteractions',JSON.stringify(arr));
}

showProfiles();

document.getElementById('logoutBtn').onclick=()=>{
  localStorage.clear();
  location.href="index.html";
};

const prefBtn=document.getElementById('prefBtn');
const panel=document.getElementById('prefPanel');
prefBtn.onclick=()=>panel.style.display=panel.style.display==='flex'?'none':'flex';
document.getElementById('savePrefs').onclick=()=>{
  const prefs={age:+document.getElementById('agePref').value,dist:+document.getElementById('distPref').value};
  localStorage.setItem('heartPrefs',JSON.stringify(prefs));
  alert("Preferences saved!");
  panel.style.display='none';
  showProfiles();
};
</script>
</body>
</html>
