<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Profile | HeartLink</title>
<style>
  :root {
    --hl-pink: #ff7bd8;
    --hl-dark-pink: #ff4fc0;
    --hl-bg: #fff7fb;
    --hl-text: #333;
  }

  body {
    margin: 0;
    font-family: 'Poppins', sans-serif;
    background: var(--hl-bg);
    color: var(--hl-text);
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
    padding-bottom: 80px;
  }

  header {
    background: linear-gradient(180deg, var(--hl-pink), #ffd8ef);
    width: 100%;
    text-align: center;
    color: white;
    padding: 40px 0 60px;
    border-bottom-left-radius: 40px;
    border-bottom-right-radius: 40px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  }

  header img {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    border: 4px solid white;
    object-fit: cover;
    margin-bottom: 10px;
  }

  h1 {
    margin: 0;
    font-size: 1.6rem;
  }

  .badge {
    display: inline-block;
    margin-top: 8px;
    background: var(--hl-dark-pink);
    color: white;
    padding: 6px 14px;
    border-radius: 20px;
    font-size: 0.9rem;
    font-weight: 600;
  }

  .coin-box {
    background: #fff;
    padding: 14px 20px;
    border-radius: 18px;
    margin-top: -30px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    box-shadow: 0 3px 10px rgba(0,0,0,0.1);
    width: 85%;
  }

  .coin-box span {
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--hl-dark-pink);
  }

  .buttons {
    margin-top: 25px;
    width: 85%;
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  .btn {
    background: var(--hl-pink);
    color: white;
    border: none;
    border-radius: 14px;
    padding: 12px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: background 0.3s;
  }

  .btn:hover {
    background: var(--hl-dark-pink);
  }

  .bottom-nav {
    position: fixed;
    bottom: 0; left: 0; right: 0;
    background: #fff;
    border-top: 1px solid #eee;
    display: flex;
    justify-content: space-around;
    padding: 8px 0;
    box-shadow: 0 -2px 5px rgba(0,0,0,0.05);
  }

  .bottom-nav a {
    text-decoration: none;
    color: #777;
    font-size: 0.8rem;
  }

  .bottom-nav a.active {
    color: var(--hl-pink);
    font-weight: 600;
  }

  /* Popup modal styles */
  .modal {
    display: none;
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0,0,0,0.6);
    justify-content: center;
    align-items: center;
  }

  .modal-content {
    background: #fff;
    border-radius: 20px;
    padding: 25px;
    width: 90%;
    max-width: 400px;
    text-align: center;
  }

  .modal-content h2 {
    color: var(--hl-dark-pink);
  }

  .close {
    float: right;
    cursor: pointer;
    font-weight: bold;
    color: #999;
  }

  .close:hover {
    color: var(--hl-dark-pink);
  }

  .plan {
    margin: 10px 0;
    background: var(--hl-bg);
    padding: 10px;
    border-radius: 12px;
  }

  .plan strong {
    color: var(--hl-dark-pink);
  }

  .copy-box {
    background: #fef0f9;
    padding: 10px;
    border-radius: 10px;
    font-size: 0.9rem;
    word-wrap: break-word;
  }

  .copy-btn {
    margin-top: 10px;
    background: var(--hl-pink);
    color: white;
    padding: 8px 14px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
  }
</style>
</head>
<body>

<header>
  <img id="avatar" src="https://cdn-icons-png.flaticon.com/512/1077/1077114.png" alt="User">
  <h1 id="username">Hi, Guest üíñ</h1>
  <div id="planBadge" class="badge">Free User</div>
</header>

<div class="coin-box">
  <div>üí∞ Coins:</div>
  <span id="coins">0</span>
</div>

<div class="buttons">
  <button class="btn" id="rechargeBtn">üíé Recharge</button>
  <button class="btn" id="vipBtn">üåü VIP / SVIP</button>
</div>

<!-- Recharge Modal -->
<div id="rechargeModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal('rechargeModal')">&times;</span>
    <h2>üíé Recharge Coins</h2>
    <p>Choose a method to top up your coins:</p>
    <div class="plan"><strong>Mpesa:</strong> Buy Goods Till <b>9824375</b></div>
    <div class="copy-box">Till Number: <b id="till">9824375</b></div>
    <button class="copy-btn" onclick="copyTill()">üìã Copy Till Number</button>
    <p>After payment, confirm in <b>verification.html</b></p>
    <button class="btn" onclick="window.location.href='verification.html'">‚úÖ Confirm Payment</button>
  </div>
</div>

<!-- VIP Modal -->
<div id="vipModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal('vipModal')">&times;</span>
    <h2>üåü VIP & SVIP Membership</h2>
    <div class="plan"><strong>Basic:</strong> KSh 450/month</div>
    <div class="plan"><strong>Premium:</strong> KSh 850/month</div>
    <div class="plan"><strong>VIP:</strong> KSh 1500/month</div>
    <p>Subscribe via <b>Lipa na Mpesa</b> and verify on next page.</p>
    <button class="btn" onclick="window.location.href='verification.html'">Go to Payment</button>
  </div>
</div>

<nav class="bottom-nav">
  <a href="home.html">üè†<br>Home</a>
  <a href="moment.html">ü™©<br>Moment</a>
  <a href="chat.html">üí¨<br>Chat</a>
  <a href="profile.html" class="active">üíó<br>Me</a>
</nav>

<script>
document.addEventListener("DOMContentLoaded", () => {
  // Load user info
  const username = localStorage.getItem("username") || "Guest";
  const avatar = localStorage.getItem("avatar") || "https://cdn-icons-png.flaticon.com/512/1077/1077114.png";
  const coins = localStorage.getItem("coins") || "0";
  const verified = localStorage.getItem("paymentVerified") === "true";
  const plan = localStorage.getItem("subscriptionTier") || "Free";

  document.getElementById("username").innerText = `Hi, ${username} üíñ`;
  document.getElementById("avatar").src = avatar;
  document.getElementById("coins").innerText = coins;

  const badge = document.getElementById("planBadge");
  if (verified) {
    badge.innerText = `${plan} Member`;
    badge.style.background = plan === "VIP" ? "linear-gradient(90deg, #ff4fc0, #ff9adf)" :
                             plan === "Premium" ? "#ff85d5" : "#ffa6e5";
  } else {
    badge.innerText = "Free User";
    badge.style.background = "#bbb";
  }

  document.getElementById("rechargeBtn").addEventListener("click", () => openModal("rechargeModal"));
  document.getElementById("vipBtn").addEventListener("click", () => openModal("vipModal"));
});

function openModal(id) {
  document.getElementById(id).style.display = "flex";
}
function closeModal(id) {
  document.getElementById(id).style.display = "none";
}
function copyTill() {
  navigator.clipboard.writeText(document.getElementById("till").textContent);
  alert("‚úÖ Till number copied!");
}
</script>

</body>
</html>
